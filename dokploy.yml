# Configuración para Dokploy
# Este archivo puede ser usado como referencia para configurar el despliegue en Dokploy

name: dela-platform
version: '1.0.0'

# Configuración del Backend (API)
api:
  type: node
  port: 3000
  dockerfile: api/Dockerfile
  build_command: 'npm run build'
  start_command: 'npm run start:prod'
  health_check: '/health'

  # Variables de entorno requeridas para producción
  environment:
    - DATABASE_URL=postgresql://usuario:password@host:5432/database
    - JWT_SECRET=tu_jwt_secret_super_seguro
    - NODE_ENV=production
    - PORT=3000
    - FRONTEND_URL=https://tu-dominio.com
    - ALLOWED_ORIGINS=https://tu-dominio.com
    - BCRYPT_SALT_ROUNDS=12

# Configuración del Frontend (Web)
web:
  type: nextjs
  port: 3000
  dockerfile: web/Dockerfile
  build_command: 'npm run build'
  start_command: 'npm run start'

  # Variables de entorno requeridas para producción
  environment:
    - NEXT_PUBLIC_API_URL=https://api.tu-dominio.com
    - NODE_ENV=production
    - NEXT_PUBLIC_APP_NAME=Dela Platform
    - NEXT_PUBLIC_ENVIRONMENT=production

# Base de datos (si usas Dokploy para la DB)
database:
  type: postgresql
  version: '15'
  database_name: dela_platform

# Dominio y SSL
domain:
  api: api.tu-dominio.com
  web: tu-dominio.com
  ssl: true
